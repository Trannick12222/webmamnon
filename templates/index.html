{% extends "base.html" %}

{% block title %}Trang chủ - Trường Mầm non Hoa Hướng Dương{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="hero-slider relative min-h-[80vh] flex items-center" style="min-height: 80vh !important;">
    <div class="container mx-auto px-4 relative z-10">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 items-center">
            <div class="text-white">
                <!-- Logo trong hero section -->
                <div class="flex items-center mb-6">
                    <img src="{{ url_for('static', filename='images/mnhhd.jpg') }}" alt="Logo Hoa Hướng Dương" class="w-16 h-16 md:w-20 md:h-20 rounded-xl shadow-lg mr-4 object-cover border-2 border-white/20">
                    <div>
                        <div class="text-sm md:text-base text-yellow-300 font-semibold mb-1">TRƯỜNG MẦM NON</div>
                        <div class="text-2xl md:text-3xl font-bold font-patrick text-white">Hoa Hướng Dương</div>
                    </div>
                </div>
                <h1 class="text-4xl md:text-5xl font-bold font-patrick mb-6 leading-tight">
                    Chào mừng đến với<br>
                    <span class="text-yellow-300">ngôi trường của chúng tôi</span>
                </h1>
                <p class="text-xl md:text-2xl mb-8 text-white/90 leading-relaxed">
                    Nơi nuôi dưỡng tâm hồn và phát triển tài năng của trẻ em từ 18 tháng đến 5 tuổi
                </p>
                <div class="flex flex-col sm:flex-row gap-4">
                    <a href="/chuong-trinh" class="btn-primary inline-block text-center">
                        <i class="fas fa-graduation-cap mr-2"></i>
                        Xem chương trình học
                    </a>
                    <a href="/lien-he" class="bg-white text-primary px-8 py-3 rounded-full font-semibold hover:bg-gray-100 transition inline-block text-center">
                        <i class="fas fa-phone mr-2"></i>
                        Liên hệ tư vấn
                    </a>
                </div>
            </div>
            <div class="relative">
                <div class="bg-white/10 backdrop-blur-sm rounded-3xl p-8 border border-white/20">
                    <!-- Slider Container -->
                    <div class="slider-container relative rounded-2xl overflow-hidden">
                        {% if slider_images %}
                        <div class="slider-wrapper">
                            {% for slider in slider_images %}
                            <div class="slider-slide {% if loop.first %}active{% endif %}" data-slide="{{ loop.index0 }}">
                                <img src="/static/{{ slider.image_path }}" 
                                     alt="{{ slider.title }}" class="w-full h-64 md:h-80 object-cover">
                                {% if slider.title or slider.description %}
                                <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-6">
                                    {% if slider.title %}
                                    <h3 class="text-white text-lg font-bold mb-2">{{ slider.title }}</h3>
                                    {% endif %}
                                    {% if slider.description %}
                                    <p class="text-white/90 text-sm">{{ slider.description }}</p>
                                    {% endif %}
                                </div>
                                {% endif %}
                            </div>
                            {% endfor %}
                        </div>
                        
                        <!-- Navigation Arrows -->
                        {% if slider_images|length > 1 %}
                        <button class="slider-prev absolute left-4 top-1/2 transform -translate-y-1/2 bg-white/20 hover:bg-white/30 text-white p-2 rounded-full transition">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <button class="slider-next absolute right-4 top-1/2 transform -translate-y-1/2 bg-white/20 hover:bg-white/30 text-white p-2 rounded-full transition">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                        
                        <!-- Dots Indicator -->
                        <div class="slider-dots absolute bottom-4 left-1/2 transform -translate-x-1/2 flex space-x-2">
                            {% for slider in slider_images %}
                            <button class="slider-dot w-3 h-3 rounded-full bg-white/50 hover:bg-white/80 transition {% if loop.first %}active bg-white{% endif %}" data-slide="{{ loop.index0 }}"></button>
                            {% endfor %}
                        </div>
                        {% endif %}
                        
                        {% else %}
                        <!-- Fallback image if no slider images -->
                        <img src="https://images.unsplash.com/photo-1587654780291-39c9404d746b?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" 
                             alt="Trẻ em vui chơi" class="rounded-2xl w-full h-64 md:h-80 object-cover">
                        {% endif %}
                    </div>
                </div>
                <!-- Floating elements -->
                <div class="absolute -top-4 -left-4 w-16 h-16 bg-yellow-300 rounded-full flex items-center justify-center">
                    <i class="fas fa-star text-orange-600 text-xl"></i>
                </div>
                <div class="absolute -bottom-4 -right-4 w-12 h-12 bg-white rounded-full flex items-center justify-center">
                    <i class="fas fa-heart text-primary text-lg"></i>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Decorative shapes -->
    <div class="absolute top-10 right-10 w-20 h-20 bg-yellow-300/20 rounded-full animate-bounce"></div>
    <div class="absolute bottom-20 left-10 w-16 h-16 bg-white/20 rounded-full animate-pulse"></div>
</section>

<!-- About Section -->
<section class="py-20 bg-gradient-to-br from-blue-50 to-purple-50 relative overflow-hidden">
    <div class="container mx-auto px-4">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
            <div>
                <div class="text-center lg:text-left mb-8">
                    <h2 class="text-4xl md:text-5xl font-bold text-gray-800 mb-6">
                        <span class="text-primary font-patrick">
                            {{ about_section.title if about_section else 'Về chúng tôi' }}
                        </span>
                    </h2>
                    <p class="text-lg text-gray-600 leading-relaxed mb-6">
                        {{ about_section.description_1 if about_section else 'Trường Mầm non Hoa Hướng Dương là ngôi trường tiên phong trong việc áp dụng phương pháp giáo dục hiện đại, tập trung phát triển toàn diện cho trẻ em.' }}
                    </p>
                    <p class="text-lg text-gray-600 leading-relaxed">
                        {{ about_section.description_2 if about_section else 'Với đội ngũ giáo viên được đào tạo chuyên nghiệp và cơ sở vật chất hiện đại, chúng tôi cam kết mang đến môi trường học tập an toàn, vui tươi và sáng tạo.' }}
                    </p>
                </div>
                
                <div class="grid grid-cols-2 gap-6">
                    {% if about_stats %}
                        {% for stat in about_stats %}
                        <div class="text-center p-6 bg-white rounded-2xl shadow-lg card-hover">
                            <div class="w-16 h-16 {{ stat.color_class }} rounded-full flex items-center justify-center mx-auto mb-4">
                                <i class="{{ stat.icon_class }} text-white text-2xl"></i>
                            </div>
                            <h3 class="text-2xl font-bold {{ stat.color_class.replace('bg-', 'text-') }} mb-2">{{ stat.stat_value }}</h3>
                            <p class="text-gray-600">{{ stat.stat_label }}</p>
                        </div>
                        {% endfor %}
                    {% else %}
                        <!-- Default stats if no data in database -->
                        <div class="text-center p-6 bg-white rounded-2xl shadow-lg card-hover">
                            <div class="w-16 h-16 bg-primary rounded-full flex items-center justify-center mx-auto mb-4">
                                <i class="fas fa-users text-white text-2xl"></i>
                            </div>
                            <h3 class="text-2xl font-bold text-primary mb-2">200+</h3>
                            <p class="text-gray-600">Học sinh</p>
                        </div>
                        <div class="text-center p-6 bg-white rounded-2xl shadow-lg card-hover">
                            <div class="w-16 h-16 bg-secondary rounded-full flex items-center justify-center mx-auto mb-4">
                                <i class="fas fa-chalkboard-teacher text-white text-2xl"></i>
                            </div>
                            <h3 class="text-2xl font-bold text-secondary mb-2">25</h3>
                            <p class="text-gray-600">Giáo viên</p>
                        </div>
                    {% endif %}
                </div>
            </div>
            
            <div class="relative">
                <div class="grid grid-cols-2 gap-4">
                    {% if about_section and about_section.image_1 %}
                    <img src="/static/{{ about_section.image_1 }}" 
                         alt="Hình ảnh 1" class="rounded-2xl shadow-lg">
                    {% else %}
                    <img src="https://images.unsplash.com/photo-1596461404969-9ae70f2830c1?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80" 
                         alt="Trẻ học tập" class="rounded-2xl shadow-lg">
                    {% endif %}
                    
                    {% if about_section and about_section.image_2 %}
                    <img src="/static/{{ about_section.image_2 }}" 
                         alt="Hình ảnh 2" class="rounded-2xl shadow-lg mt-8">
                    {% else %}
                    <img src="https://images.unsplash.com/photo-1503454537195-1dcabb73ffb9?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80" 
                         alt="Trẻ vui chơi" class="rounded-2xl shadow-lg mt-8">
                    {% endif %}
                </div>
                <div class="absolute -bottom-4 -left-4 bg-yellow-300 rounded-2xl p-6 shadow-lg">
                    <div class="text-center">
                        <h4 class="text-2xl font-bold text-orange-600 font-patrick">
                            {{ about_section.experience_years if about_section else '10+' }}
                        </h4>
                        <p class="text-orange-800 font-medium">
                            {{ about_section.experience_text if about_section else 'Năm kinh nghiệm' }}
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Video Section -->
{% if intro_videos %}
<section class="py-20 bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 relative overflow-hidden">
    <!-- Background decorative elements -->
    <div class="absolute inset-0 overflow-hidden">
        <div class="absolute -top-20 -right-20 w-80 h-80 bg-white/10 rounded-full animate-pulse"></div>
        <div class="absolute top-40 -left-20 w-60 h-60 bg-white/20 rounded-full animate-pulse" style="animation-delay: 2s;"></div>
        <div class="absolute -bottom-10 right-1/3 w-40 h-40 bg-white/10 rounded-full animate-pulse" style="animation-delay: 4s;"></div>
    </div>
    
    <div class="container mx-auto px-4 relative z-10">
        <div class="text-center mb-16">
            <div class="inline-block mb-4">
                <span class="bg-white/30 backdrop-blur-sm px-6 py-2 rounded-full text-primary font-semibold text-lg">
                    🎥 Video giới thiệu
                </span>
            </div>
            <h2 class="text-4xl md:text-5xl font-bold text-gray-800 mb-6 font-patrick">
                Khám phá thế giới <span class="text-primary">Hoa Hướng Dương</span>
            </h2>
            <p class="text-xl text-gray-600 max-w-3xl mx-auto leading-relaxed">
                Cùng tham quan và tìm hiểu về môi trường học tập tuyệt vời dành cho các bé
            </p>
        </div>
        
        <div class="grid grid-cols-1 {% if intro_videos|length > 1 %}lg:grid-cols-2{% endif %} {% if intro_videos|length > 2 %}xl:grid-cols-3{% endif %} gap-8 max-w-6xl mx-auto">
            {% for video in intro_videos %}
            <div class="group transform hover:scale-105 transition-all duration-300">
                <div class="bg-white/80 backdrop-blur-sm rounded-3xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-300 border border-white/50">
                    <!-- Video Thumbnail/Embed -->
                    <div class="relative aspect-video bg-gray-900 overflow-hidden">
                        {% set video_id = video.video_url | youtube_id %}
                        
                        {% if video.thumbnail_image %}
                        <!-- Custom thumbnail with play button overlay -->
                        <div class="relative w-full h-full cursor-pointer video-thumbnail" 
                             data-video-id="{{ video_id }}" 
                             data-video-title="{{ video.title }}">
                            <img src="/static/{{ video.thumbnail_image }}" 
                                 alt="{{ video.title }}" 
                                 class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-300">
                            <div class="absolute inset-0 bg-black/30 group-hover:bg-black/20 transition-colors duration-300"></div>
                            <div class="absolute inset-0 flex items-center justify-center">
                                <div class="w-20 h-20 bg-red-600 rounded-full flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300">
                                    <i class="fas fa-play text-white text-2xl ml-1"></i>
                                </div>
                            </div>
                        </div>
                        {% else %}
                        <!-- YouTube thumbnail with play button -->
                        <div class="relative w-full h-full cursor-pointer video-thumbnail" 
                             data-video-id="{{ video_id }}" 
                             data-video-title="{{ video.title }}">
                            <img src="https://img.youtube.com/vi/{{ video_id }}/maxresdefault.jpg" 
                                 alt="{{ video.title }}" 
                                 class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"
                                 onerror="this.src='https://img.youtube.com/vi/{{ video_id }}/hqdefault.jpg'">
                            <div class="absolute inset-0 bg-black/30 group-hover:bg-black/20 transition-colors duration-300"></div>
                            <div class="absolute inset-0 flex items-center justify-center">
                                <div class="w-20 h-20 bg-red-600 rounded-full flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300">
                                    <i class="fas fa-play text-white text-2xl ml-1"></i>
                                </div>
                            </div>
                        </div>
                        {% endif %}
                    </div>
                    
                    <!-- Video Info -->
                    <div class="p-6">
                        <h3 class="text-xl font-bold text-gray-800 mb-3 group-hover:text-primary transition-colors">
                            {{ video.title }}
                        </h3>
                        {% if video.description %}
                        <p class="text-gray-600 leading-relaxed line-clamp-3">
                            {{ video.description }}
                        </p>
                        {% endif %}
                        
                        <div class="mt-4 flex items-center justify-between">
                            <span class="text-sm text-gray-500">
                                <i class="fab fa-youtube text-red-500 mr-1"></i>
                                Video YouTube
                            </span>
                            <button class="text-primary font-semibold hover:text-secondary transition video-play-btn" 
                                    data-video-id="{{ video_id }}" 
                                    data-video-title="{{ video.title }}">
                                Xem video <i class="fas fa-play ml-1"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        
        <!-- Call to Action -->
        <div class="text-center mt-16">
            <div class="inline-flex items-center bg-white/20 backdrop-blur-sm rounded-2xl p-2">
                <a href="/lien-he" class="bg-primary text-white px-8 py-4 rounded-xl font-bold text-lg hover:bg-secondary transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105">
                    <i class="fas fa-calendar-alt mr-2"></i>
                    Đặt lịch tham quan
                </a>
                <span class="text-gray-700 px-6 py-4">
                    hoặc gọi <strong class="text-primary">📞 0123 456 789</strong>
                </span>
            </div>
        </div>
    </div>
</section>
{% endif %}

<!-- Programs Section -->
<section class="py-20 bg-white">
    <div class="container mx-auto px-4">
        <div class="text-center mb-16">
            <h2 class="text-4xl md:text-5xl font-bold text-gray-800 mb-6">
                <span class="text-primary font-patrick">Chương trình học</span>
            </h2>
            <p class="text-xl text-gray-600 max-w-3xl mx-auto">
                Các chương trình giáo dục được thiết kế phù hợp với từng độ tuổi, 
                giúp trẻ phát triển toàn diện về thể chất, trí tuệ và cảm xúc
            </p>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            {% for program in featured_programs %}
            <div class="bg-white rounded-3xl shadow-lg overflow-hidden card-hover border border-gray-100">
                {% if program.featured_image %}
                    {% if program.featured_image.startswith('http') %}
                    <img src="{{ program.featured_image }}" 
                         alt="{{ program.name }}" class="w-full h-48 object-cover">
                    {% else %}
                    <img src="/static/{{ program.featured_image }}" 
                         alt="{{ program.name }}" class="w-full h-48 object-cover">
                    {% endif %}
                {% else %}
                <div class="w-full h-48 flex items-center justify-center" style="background: linear-gradient(to bottom right, #ff6b35, #f7931e);">
                    <i class="fas fa-graduation-cap text-white text-4xl"></i>
                </div>
                {% endif %}
                
                <div class="p-8">
                    <div class="flex items-center justify-between mb-4">
                        <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium">
                            {{ program.age_group }}
                        </span>
                        <span class="text-primary font-bold text-lg">{{ program.price }}</span>
                    </div>
                    
                    <h3 class="text-xl font-bold text-gray-800 mb-3">{{ program.name }}</h3>
                    <p class="text-gray-600 mb-6 leading-relaxed">
                        {{ program.description[:100] }}{% if program.description|length > 100 %}...{% endif %}
                    </p>
                    
                    <div class="flex items-center justify-between">
                        <div class="text-sm text-gray-500">
                            <i class="fas fa-clock mr-1"></i>
                            {{ program.duration }}
                        </div>
                        <a href="{{ url_for('program_detail', id=program.id) }}" 
                           class="text-primary font-semibold hover:text-secondary transition">
                            Chi tiết <i class="fas fa-arrow-right ml-1"></i>
                        </a>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        
        <div class="text-center mt-12">
            <a href="/chuong-trinh" class="btn-primary">
                Xem tất cả chương trình
            </a>
        </div>
    </div>
</section>

<!-- Features Section -->
<section class="py-20 relative overflow-hidden" style="background: linear-gradient(to right, #ff6b35, #f7931e);">
    <!-- Background decorative elements -->
    <div class="absolute inset-0 overflow-hidden">
        <div class="absolute -top-20 -left-20 w-80 h-80 bg-white/5 rounded-full animate-pulse"></div>
        <div class="absolute top-40 -right-20 w-60 h-60 bg-white/10 rounded-full animate-pulse" style="animation-delay: 2s;"></div>
        <div class="absolute -bottom-10 left-1/3 w-40 h-40 bg-white/5 rounded-full animate-pulse" style="animation-delay: 4s;"></div>
    </div>
    
    <div class="container mx-auto px-4 relative z-10">
        <div class="text-center mb-16">
            <div class="inline-block mb-4">
                <span class="bg-white/20 backdrop-blur-sm px-6 py-2 rounded-full text-white font-semibold text-lg">
                    ✨ Điểm khác biệt của chúng tôi
                </span>
            </div>
            <h2 class="text-4xl md:text-5xl font-bold text-white mb-6 font-patrick">
                Tại sao chọn Hoa Hướng Dương?
            </h2>
            <p class="text-xl text-white/90 max-w-3xl mx-auto leading-relaxed">
                Chúng tôi mang đến những giá trị giáo dục tốt nhất cho sự phát triển toàn diện của trẻ
            </p>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
            <!-- Feature 1 -->
            <div class="group transform hover:scale-105 transition-all duration-300">
                <div class="bg-white/10 backdrop-blur-sm rounded-3xl p-8 h-full border border-white/20 hover:bg-white/15 hover:shadow-2xl transition-all duration-300">
                    <div class="relative mb-6">
                        <div class="w-20 h-20 bg-white/25 rounded-2xl flex items-center justify-center mx-auto group-hover:bg-white/35 transition-all duration-300 group-hover:scale-110 shadow-lg">
                            <i class="fas fa-shield-alt text-3xl text-white"></i>
                        </div>
                        <div class="absolute -top-2 -right-2 w-6 h-6 bg-yellow-300 rounded-full flex items-center justify-center">
                            <i class="fas fa-star text-orange-600 text-xs"></i>
                        </div>
                    </div>
                    <h3 class="text-xl font-bold mb-4 text-white group-hover:text-yellow-100 transition-colors">
                        🛡️ An toàn tuyệt đối
                    </h3>
                    <p class="text-white/90 leading-relaxed text-center group-hover:text-white transition-colors">
                        Hệ thống camera giám sát 24/7, đội ngũ bảo vệ chuyên nghiệp và quy trình an toàn nghiêm ngặt
                    </p>
                    <div class="mt-4 flex justify-center space-x-1">
                        <div class="w-2 h-2 bg-white/50 rounded-full group-hover:bg-yellow-300 transition-all"></div>
                        <div class="w-2 h-2 bg-white/50 rounded-full group-hover:bg-yellow-300 transition-all" style="animation-delay: 0.1s;"></div>
                        <div class="w-2 h-2 bg-white/50 rounded-full group-hover:bg-yellow-300 transition-all" style="animation-delay: 0.2s;"></div>
                    </div>
                </div>
            </div>
            
            <!-- Feature 2 -->
            <div class="group transform hover:scale-105 transition-all duration-300">
                <div class="bg-white/10 backdrop-blur-sm rounded-3xl p-8 h-full border border-white/20 hover:bg-white/15 hover:shadow-2xl transition-all duration-300">
                    <div class="relative mb-6">
                        <div class="w-20 h-20 bg-white/25 rounded-2xl flex items-center justify-center mx-auto group-hover:bg-white/35 transition-all duration-300 group-hover:scale-110 shadow-lg">
                            <i class="fas fa-brain text-3xl text-white"></i>
                        </div>
                        <div class="absolute -top-2 -right-2 w-6 h-6 bg-yellow-300 rounded-full flex items-center justify-center">
                            <i class="fas fa-lightbulb text-orange-600 text-xs"></i>
                        </div>
                    </div>
                    <h3 class="text-xl font-bold mb-4 text-white group-hover:text-yellow-100 transition-colors">
                        🧠 Phát triển tư duy
                    </h3>
                    <p class="text-white/90 leading-relaxed text-center group-hover:text-white transition-colors">
                        Phương pháp STEAM hiện đại giúp trẻ phát triển tư duy logic, sáng tạo và kỹ năng giải quyết vấn đề
                    </p>
                    <div class="mt-4 flex justify-center space-x-1">
                        <div class="w-2 h-2 bg-white/50 rounded-full group-hover:bg-yellow-300 transition-all"></div>
                        <div class="w-2 h-2 bg-white/50 rounded-full group-hover:bg-yellow-300 transition-all" style="animation-delay: 0.1s;"></div>
                        <div class="w-2 h-2 bg-white/50 rounded-full group-hover:bg-yellow-300 transition-all" style="animation-delay: 0.2s;"></div>
                    </div>
                </div>
            </div>
            
            <!-- Feature 3 -->
            <div class="group transform hover:scale-105 transition-all duration-300">
                <div class="bg-white/10 backdrop-blur-sm rounded-3xl p-8 h-full border border-white/20 hover:bg-white/15 hover:shadow-2xl transition-all duration-300">
                    <div class="relative mb-6">
                        <div class="w-20 h-20 bg-white/25 rounded-2xl flex items-center justify-center mx-auto group-hover:bg-white/35 transition-all duration-300 group-hover:scale-110 shadow-lg">
                            <i class="fas fa-heart text-3xl text-white"></i>
                        </div>
                        <div class="absolute -top-2 -right-2 w-6 h-6 bg-yellow-300 rounded-full flex items-center justify-center">
                            <i class="fas fa-hand-holding-heart text-orange-600 text-xs"></i>
                        </div>
                    </div>
                    <h3 class="text-xl font-bold mb-4 text-white group-hover:text-yellow-100 transition-colors">
                        ❤️ Yêu thương chân thành
                    </h3>
                    <p class="text-white/90 leading-relaxed text-center group-hover:text-white transition-colors">
                        Đội ngũ giáo viên nhiều kinh nghiệm, tận tâm và yêu trẻ như con em trong chính gia đình mình
                    </p>
                    <div class="mt-4 flex justify-center space-x-1">
                        <div class="w-2 h-2 bg-white/50 rounded-full group-hover:bg-yellow-300 transition-all"></div>
                        <div class="w-2 h-2 bg-white/50 rounded-full group-hover:bg-yellow-300 transition-all" style="animation-delay: 0.1s;"></div>
                        <div class="w-2 h-2 bg-white/50 rounded-full group-hover:bg-yellow-300 transition-all" style="animation-delay: 0.2s;"></div>
                    </div>
                </div>
            </div>
            
            <!-- Feature 4 -->
            <div class="group transform hover:scale-105 transition-all duration-300">
                <div class="bg-white/10 backdrop-blur-sm rounded-3xl p-8 h-full border border-white/20 hover:bg-white/15 hover:shadow-2xl transition-all duration-300">
                    <div class="relative mb-6">
                        <div class="w-20 h-20 bg-white/25 rounded-2xl flex items-center justify-center mx-auto group-hover:bg-white/35 transition-all duration-300 group-hover:scale-110 shadow-lg">
                            <i class="fas fa-leaf text-3xl text-white"></i>
                        </div>
                        <div class="absolute -top-2 -right-2 w-6 h-6 bg-yellow-300 rounded-full flex items-center justify-center">
                            <i class="fas fa-seedling text-orange-600 text-xs"></i>
                        </div>
                    </div>
                    <h3 class="text-xl font-bold mb-4 text-white group-hover:text-yellow-100 transition-colors">
                        🌱 Môi trường xanh
                    </h3>
                    <p class="text-white/90 leading-relaxed text-center group-hover:text-white transition-colors">
                        Không gian xanh, sạch sẽ, thân thiện với môi trường, tạo môi trường học tập lý tưởng cho trẻ
                    </p>
                    <div class="mt-4 flex justify-center space-x-1">
                        <div class="w-2 h-2 bg-white/50 rounded-full group-hover:bg-yellow-300 transition-all"></div>
                        <div class="w-2 h-2 bg-white/50 rounded-full group-hover:bg-yellow-300 transition-all" style="animation-delay: 0.1s;"></div>
                        <div class="w-2 h-2 bg-white/50 rounded-full group-hover:bg-yellow-300 transition-all" style="animation-delay: 0.2s;"></div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Call to Action -->
        <div class="text-center mt-16">
            <div class="inline-flex items-center bg-white/20 backdrop-blur-sm rounded-2xl p-2">
                <a href="/lien-he" class="bg-white text-orange-500 px-8 py-4 rounded-xl font-bold text-lg hover:bg-yellow-50 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105">
                    <i class="fas fa-heart mr-2"></i>
                    Đăng ký tham quan ngay
                </a>
                <span class="text-white/90 px-6 py-4">
                    hoặc gọi <strong class="text-yellow-300">📞 1900-xxxx</strong>
                </span>
            </div>
        </div>
    </div>
</section>

<!-- News Section -->
{% if latest_news %}
<section class="py-20 bg-gray-50">
    <div class="container mx-auto px-4">
        <div class="text-center mb-16">
            <h2 class="text-4xl md:text-5xl font-bold text-gray-800 mb-6">
                <span class="text-primary font-patrick">Tin tức mới nhất</span>
            </h2>
            <p class="text-xl text-gray-600 max-w-3xl mx-auto">
                Cập nhật những thông tin mới nhất từ trường Hoa Hướng Dương
            </p>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
            {% for article in latest_news %}
            <article class="bg-white rounded-2xl shadow-lg overflow-hidden card-hover">
                {% if article.featured_image %}
                    {% if article.featured_image.startswith('http') %}
                    <img src="{{ article.featured_image }}" 
                         alt="{{ article.title }}" class="w-full h-48 object-cover">
                    {% else %}
                    <img src="/static/{{ article.featured_image }}" 
                         alt="{{ article.title }}" class="w-full h-48 object-cover">
                    {% endif %}
                {% else %}
                <div class="w-full h-48 bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center">
                    <i class="fas fa-newspaper text-white text-3xl"></i>
                </div>
                {% endif %}
                
                <div class="p-6">
                    <div class="text-sm text-gray-500 mb-3">
                        <i class="fas fa-calendar mr-2"></i>
                        {{ article.created_at.strftime('%d/%m/%Y') }}
                    </div>
                    <h3 class="text-lg font-bold text-gray-800 mb-3 leading-tight">
                        {{ article.title }}
                    </h3>
                    <p class="text-gray-600 mb-4 leading-relaxed">
                        {{ article.summary[:100] if article.summary else article.content[:100] }}...
                    </p>
                    <a href="{{ url_for('news_detail', id=article.id) }}" 
                       class="text-primary font-semibold hover:text-secondary transition">
                        Đọc thêm <i class="fas fa-arrow-right ml-1"></i>
                    </a>
                </div>
            </article>
            {% endfor %}
        </div>
        
        <div class="text-center mt-12">
            <a href="/tin-tuc" class="btn-primary">
                Xem tất cả tin tức
            </a>
        </div>
    </div>
</section>
{% endif %}

<!-- Gallery Section -->
{% if gallery_images %}
<section class="py-20 bg-white">
    <div class="container mx-auto px-4">
        <div class="text-center mb-16">
            <h2 class="text-4xl md:text-5xl font-bold text-gray-800 mb-6">
                <span class="text-primary font-patrick">Khoảnh khắc đáng nhớ</span>
            </h2>
            <p class="text-xl text-gray-600 max-w-3xl mx-auto">
                Những hình ảnh sinh động về cuộc sống học tập và vui chơi của các em
            </p>
        </div>
        
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
            {% for image in gallery_images %}
            <div class="relative group overflow-hidden rounded-2xl shadow-lg card-hover">
                {% if image.image_path.startswith('http') %}
                <img src="{{ image.image_path }}" 
                     alt="{{ image.title }}" class="w-full h-48 object-cover group-hover:scale-110 transition-transform duration-300">
                {% else %}
                <img src="/static/{{ image.image_path }}" 
                     alt="{{ image.title }}" class="w-full h-48 object-cover group-hover:scale-110 transition-transform duration-300">
                {% endif %}
                <div class="absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center">
                    <div class="text-white text-center">
                        <i class="fas fa-search-plus text-2xl mb-2"></i>
                        <p class="text-sm font-medium">{{ image.title }}</p>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        
        <div class="text-center mt-12">
            <a href="/thu-vien-anh" class="btn-primary">
                Xem thêm hình ảnh
            </a>
        </div>
    </div>
</section>
{% endif %}

<!-- Events Section -->
{% if upcoming_events %}
<section class="py-20 bg-blue-50">
    <div class="container mx-auto px-4">
        <div class="text-center mb-16">
            <h2 class="text-4xl md:text-5xl font-bold text-gray-800 mb-6">
                <span class="text-primary font-patrick">Sự kiện sắp tới</span>
            </h2>
            <p class="text-xl text-gray-600 max-w-3xl mx-auto">
                Đừng bỏ lỡ những sự kiện thú vị dành cho các em học sinh
            </p>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
            {% for event in upcoming_events %}
            <div class="bg-white rounded-2xl shadow-lg overflow-hidden card-hover">
                {% if event.featured_image %}
                <img src="/static/{{ event.featured_image }}" 
                     alt="{{ event.title }}" class="w-full h-48 object-cover">
                {% else %}
                <div class="w-full h-48 bg-gradient-to-br from-green-400 to-blue-500 flex items-center justify-center">
                    <i class="fas fa-calendar-alt text-white text-3xl"></i>
                </div>
                {% endif %}
                
                <div class="p-6">
                    <div class="flex items-center text-sm text-primary font-semibold mb-3">
                        <i class="fas fa-calendar mr-2"></i>
                        {{ event.event_date.strftime('%d/%m/%Y') }}
                        <i class="fas fa-clock ml-4 mr-2"></i>
                        {{ event.event_date.strftime('%H:%M') }}
                    </div>
                    <h3 class="text-lg font-bold text-gray-800 mb-3">{{ event.title }}</h3>
                    <p class="text-gray-600 mb-4 leading-relaxed">
                        {{ event.description[:100] if event.description else '' }}...
                    </p>
                    {% if event.location %}
                    <div class="flex items-center text-sm text-gray-500">
                        <i class="fas fa-map-marker-alt mr-2"></i>
                        {{ event.location }}
                    </div>
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        </div>
        
        <div class="text-center mt-12">
            <a href="/su-kien" class="btn-primary">
                Xem tất cả sự kiện
            </a>
        </div>
    </div>
</section>
{% endif %}

<!-- CTA Section -->
<section class="py-20 bg-gradient-to-r from-purple-600 to-pink-600 relative overflow-hidden">
    <div class="container mx-auto px-4 relative z-10">
        <div class="text-center text-white">
            <h2 class="text-4xl md:text-5xl font-bold mb-6 font-patrick">
                Sẵn sàng cho con bước vào hành trình học tập?
            </h2>
            <p class="text-xl mb-8 text-white/90 max-w-3xl mx-auto">
                Hãy liên hệ với chúng tôi để được tư vấn chi tiết về chương trình học 
                phù hợp với độ tuổi của con bạn
            </p>
            <div class="flex flex-col sm:flex-row gap-4 justify-center">
                <a href="/lien-he" class="bg-white text-purple-600 px-8 py-4 rounded-full font-bold text-lg hover:bg-gray-100 transition">
                    <i class="fas fa-phone mr-2"></i>
                    Liên hệ ngay
                </a>
                <a href="/chuong-trinh" class="border-2 border-white text-white px-8 py-4 rounded-full font-bold text-lg hover:bg-white hover:text-purple-600 transition">
                    <i class="fas fa-book mr-2"></i>
                    Tìm hiểu chương trình
                </a>
            </div>
        </div>
    </div>
    
    <!-- Background decorations -->
    <div class="absolute top-0 left-0 w-64 h-64 bg-white/10 rounded-full -translate-x-32 -translate-y-32"></div>
    <div class="absolute bottom-0 right-0 w-64 h-64 bg-white/10 rounded-full translate-x-32 translate-y-32"></div>
</section>

<style>
.slider-container {
    position: relative;
    background: rgba(255,255,255,0.1); /* Debug background */
    border: 2px solid rgba(255,255,255,0.2); /* Debug border */
}

.slider-wrapper {
    position: relative;
    width: 100%;
    min-height: 256px; /* Đặt chiều cao tối thiểu (h-64) */
}

.slider-slide {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    opacity: 0;
    transition: opacity 0.5s ease-in-out;

}

.slider-slide.active {
    opacity: 1;

}

.slider-slide img {
    width: 100%;
    height: 256px; /* Đặt chiều cao cố định cho hình ảnh (h-64) */
    object-fit: cover;
}

/* Responsive heights */
@media (min-width: 768px) {
    .slider-wrapper {
        min-height: 320px; /* h-80 */
    }
    
    .slider-slide img {
        height: 320px; /* h-80 */
    }
}

.slider-dot.active {
    background-color: white !important;
}

.slider-prev, .slider-next {
    z-index: 10;
}

.slider-dots {
    z-index: 10;
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const sliderContainer = document.querySelector('.slider-container');
    if (!sliderContainer) return;
    
    const slides = document.querySelectorAll('.slider-slide');
    const dots = document.querySelectorAll('.slider-dot');
    const prevBtn = document.querySelector('.slider-prev');
    const nextBtn = document.querySelector('.slider-next');
    
    if (slides.length <= 1) return;
    
    let currentSlide = 0;
    let slideInterval;
    
    function showSlide(index) {
        // Hide all slides
        slides.forEach(slide => slide.classList.remove('active'));
        dots.forEach(dot => dot.classList.remove('active', 'bg-white'));
        
        // Show current slide
        slides[index].classList.add('active');
        if (dots[index]) {
            dots[index].classList.add('active', 'bg-white');
        }
        
        currentSlide = index;
    }
    
    function nextSlide() {
        const next = (currentSlide + 1) % slides.length;
        showSlide(next);
    }
    
    function prevSlide() {
        const prev = (currentSlide - 1 + slides.length) % slides.length;
        showSlide(prev);
    }
    
    function startAutoSlide() {
        // Clear any existing interval first to prevent duplicates
        stopAutoSlide();
        slideInterval = setInterval(nextSlide, 5000); // Change slide every 5 seconds
    }
    
    function stopAutoSlide() {
        if (slideInterval) {
            clearInterval(slideInterval);
            slideInterval = null; // Reset to null
        }
    }
    
    // Event listeners
    if (nextBtn) {
        nextBtn.addEventListener('click', () => {
            console.log('Next clicked - stopping and restarting timer');
            stopAutoSlide(); // Stop first
            nextSlide();
            startAutoSlide(); // Restart with fresh 5s timer
        });
    }
    
    if (prevBtn) {
        prevBtn.addEventListener('click', () => {
            console.log('Prev clicked - stopping and restarting timer');
            stopAutoSlide(); // Stop first
            prevSlide();
            startAutoSlide(); // Restart with fresh 5s timer
        });
    }
    
    dots.forEach((dot, index) => {
        dot.addEventListener('click', () => {
            console.log('Dot clicked - stopping and restarting timer');
            stopAutoSlide(); // Stop first
            showSlide(index);
            startAutoSlide(); // Restart with fresh 5s timer
        });
    });
    
    // Pause auto-slide on hover
    sliderContainer.addEventListener('mouseenter', stopAutoSlide);
    sliderContainer.addEventListener('mouseleave', startAutoSlide);
    
    // Start auto-slide
    startAutoSlide();
});

// Video Modal Functionality
document.addEventListener('DOMContentLoaded', function() {
    // Create video modal
    const videoModal = document.createElement('div');
    videoModal.id = 'videoModal';
    videoModal.className = 'fixed inset-0 bg-black bg-opacity-75 hidden items-center justify-center z-50 p-4';
    videoModal.innerHTML = `
        <div class="relative max-w-4xl w-full">
            <button id="closeVideoModal" class="absolute -top-12 right-0 text-white text-2xl hover:text-gray-300 transition">
                <i class="fas fa-times"></i>
            </button>
            <div class="aspect-video bg-black rounded-lg overflow-hidden">
                <iframe id="videoIframe" class="w-full h-full" frameborder="0" allowfullscreen></iframe>
            </div>
            <div id="videoTitle" class="text-white text-center mt-4 text-lg font-semibold"></div>
        </div>
    `;
    document.body.appendChild(videoModal);
    
    // Video play functionality
    function playVideo(videoId, title) {
        const iframe = document.getElementById('videoIframe');
        const titleElement = document.getElementById('videoTitle');
        const modal = document.getElementById('videoModal');
        
        iframe.src = `https://www.youtube.com/embed/${videoId}?autoplay=1&rel=0`;
        titleElement.textContent = title;
        modal.classList.remove('hidden');
        modal.classList.add('flex');
        document.body.style.overflow = 'hidden';
    }
    
    function closeVideo() {
        const iframe = document.getElementById('videoIframe');
        const modal = document.getElementById('videoModal');
        
        iframe.src = '';
        modal.classList.add('hidden');
        modal.classList.remove('flex');
        document.body.style.overflow = 'auto';
    }
    
    // Extract YouTube video ID from URL
    function getYouTubeVideoId(url) {
        const regExp = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/;
        const match = url.match(regExp);
        return (match && match[2].length === 11) ? match[2] : null;
    }
    
    // Add click events to video elements
    document.querySelectorAll('.video-thumbnail, .video-play-btn').forEach(element => {
        element.addEventListener('click', function() {
            const videoId = this.getAttribute('data-video-id');
            const title = this.getAttribute('data-video-title');
            if (videoId) {
                playVideo(videoId, title);
            }
        });
    });
    
    // Close modal events
    document.getElementById('closeVideoModal').addEventListener('click', closeVideo);
    document.getElementById('videoModal').addEventListener('click', function(e) {
        if (e.target === this) {
            closeVideo();
        }
    });
    
    // Close with Escape key
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
            closeVideo();
        }
    });
});
</script>
{% endblock %}